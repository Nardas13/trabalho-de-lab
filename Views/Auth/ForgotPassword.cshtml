@{
    ViewData["Title"] = "Recuperar Password";
    Layout = "_Layout";
}

@if (TempData["AuthError"] is string err)
{
    <div class="inline-msg inline-error">@err</div>
}
@if (TempData["AuthSuccess"] is string ok)
{
    <div class="inline-msg inline-success">@ok</div>
}

@section Styles {
    <link rel="stylesheet" href="~/css/auth.css?v=@DateTime.Now.Ticks" />
}

<div class="auth-page">
    <div class="auth-wrapper fade-up">

        <div class="auth-card active">

            <p class="step-indicator">Passo 1 de 3</p>

            <h1 class="auth-title">Recuperar Password</h1>

            <p class="auth-subtext">
                Introduz o teu email.
                Se existir e estiver confirmado, enviaremos um código.
            </p>

            <form method="post" action="/Auth/ForgotPassword">

                <div style="position:relative; margin-bottom: 12px;">
                    <input type="email"
                           id="fp-email"
                           name="Email"
                           placeholder="Email"
                           required
                           class="@(TempData["EmailStatus"] != null ? "input-error" : "")" />

                    @if (TempData["EmailStatus"]?.ToString() == "notfound")
                    {
                        <div class="input-tip">Email não encontrado</div>
                    }
                    
                </div>

                <button type="submit" class="auth-btn">Enviar código</button>

                @if (TempData["EmailStatus"]?.ToString() == "notfound")
                {
                    <p class="mini-hint">
                        Não tens conta? <a href="/Auth/Index">Criar conta</a>
                    </p>
                }
            </form>

            <p class="auth-switch">
                Lembraste da password? <a href="/Auth/Index">Voltar ao Login</a>
            </p>

        </div>

    </div>
</div>

<script>
    // desaparecer alertas
    setTimeout(() => {
        document.querySelectorAll(".inline-msg")
            .forEach(m => m.style.opacity = "0");
    }, 3000);
</script>
